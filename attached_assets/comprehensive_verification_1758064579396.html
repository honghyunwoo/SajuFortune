<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” ì „ì²´ ì²œê°„ ì‹œì£¼ ê³„ì‚° ê²€ì¦</title>
    <script src="saju-core-functions.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .test-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin: 20px 0; }
        .gan-box { background: #f8f9fa; border: 2px solid #dee2e6; padding: 15px; border-radius: 8px; }
        .correct { background: #d4edda; border-color: #28a745; }
        .incorrect { background: #f8d7da; border-color: #dc3545; }
        .gan-title { font-size: 18px; font-weight: bold; text-align: center; margin-bottom: 10px; }
        .time-test { font-size: 12px; margin: 3px 0; padding: 3px; background: white; border-radius: 3px; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>ğŸ” ì „ì²´ ì²œê°„ ì‹œì£¼ ê³„ì‚° ê²€ì¦</h1>
    <p><strong>ëª©í‘œ</strong>: 10ê°œ ì²œê°„ ëª¨ë‘ì— ëŒ€í•´ ì‹œì£¼ ê³„ì‚°ì´ ì˜¬ë°”ë¥¸ì§€ ê²€ì¦</p>

    <div id="test-results"></div>

    <script>
        const ì²œê°„ = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const ì§€ì§€ = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];

        // ì „í†µ ì‹œì£¼ ìˆœì„œ (ê° ì²œê°„ë³„ë¡œ ìì‹œë¶€í„° ì‹œì‘í•˜ëŠ” 12ì‹œê°„ ìˆœì„œ)
        const ì „í†µì‹œì£¼ìˆœì„œ = {
            'ê°‘': ['ê°‘ì', 'ì„ì¶•', 'ë³‘ì¸', 'ì •ë¬˜', 'ë¬´ì§„', 'ê¸°ì‚¬', 'ê²½ì˜¤', 'ì‹ ë¯¸', 'ì„ì‹ ', 'ê³„ìœ ', 'ê°‘ìˆ ', 'ì„í•´'],
            'ì„': ['ë³‘ì', 'ì •ì¶•', 'ë¬´ì¸', 'ê¸°ë¬˜', 'ê²½ì§„', 'ì‹ ì‚¬', 'ì„ì˜¤', 'ê³„ë¯¸', 'ê°‘ì‹ ', 'ì„ìœ ', 'ë³‘ìˆ ', 'ì •í•´'],
            'ë³‘': ['ë¬´ì', 'ê¸°ì¶•', 'ê²½ì¸', 'ì‹ ë¬˜', 'ì„ì§„', 'ê³„ì‚¬', 'ê°‘ì˜¤', 'ì„ë¯¸', 'ë³‘ì‹ ', 'ì •ìœ ', 'ë¬´ìˆ ', 'ê¸°í•´'],
            'ì •': ['ê²½ì', 'ì‹ ì¶•', 'ì„ì¸', 'ê³„ë¬˜', 'ê°‘ì§„', 'ì„ì‚¬', 'ë³‘ì˜¤', 'ì •ë¯¸', 'ë¬´ì‹ ', 'ê¸°ìœ ', 'ê²½ìˆ ', 'ì‹ í•´'],
            'ë¬´': ['ì„ì', 'ê³„ì¶•', 'ê°‘ì¸', 'ì„ë¬˜', 'ë³‘ì§„', 'ì •ì‚¬', 'ë¬´ì˜¤', 'ê¸°ë¯¸', 'ê²½ì‹ ', 'ì‹ ìœ ', 'ì„ìˆ ', 'ê³„í•´'],
            'ê¸°': ['ê°‘ì', 'ì„ì¶•', 'ë³‘ì¸', 'ì •ë¬˜', 'ë¬´ì§„', 'ê¸°ì‚¬', 'ê²½ì˜¤', 'ì‹ ë¯¸', 'ì„ì‹ ', 'ê³„ìœ ', 'ê°‘ìˆ ', 'ì„í•´'],
            'ê²½': ['ë³‘ì', 'ì •ì¶•', 'ë¬´ì¸', 'ê¸°ë¬˜', 'ê²½ì§„', 'ì‹ ì‚¬', 'ì„ì˜¤', 'ê³„ë¯¸', 'ê°‘ì‹ ', 'ì„ìœ ', 'ë³‘ìˆ ', 'ì •í•´'],
            'ì‹ ': ['ë¬´ì', 'ê¸°ì¶•', 'ê²½ì¸', 'ì‹ ë¬˜', 'ì„ì§„', 'ê³„ì‚¬', 'ê°‘ì˜¤', 'ì„ë¯¸', 'ë³‘ì‹ ', 'ì •ìœ ', 'ë¬´ìˆ ', 'ê¸°í•´'],
            'ì„': ['ê²½ì', 'ì‹ ì¶•', 'ì„ì¸', 'ê³„ë¬˜', 'ê°‘ì§„', 'ì„ì‚¬', 'ë³‘ì˜¤', 'ì •ë¯¸', 'ë¬´ì‹ ', 'ê¸°ìœ ', 'ê²½ìˆ ', 'ì‹ í•´'],
            'ê³„': ['ì„ì', 'ê³„ì¶•', 'ê°‘ì¸', 'ì„ë¬˜', 'ë³‘ì§„', 'ì •ì‚¬', 'ë¬´ì˜¤', 'ê¸°ë¯¸', 'ê²½ì‹ ', 'ì‹ ìœ ', 'ì„ìˆ ', 'ê³„í•´']
        };

        function comprehensiveTest() {
            console.clear();
            console.log('ğŸ” === ì „ì²´ ì²œê°„ ì‹œì£¼ ê³„ì‚° ê²€ì¦ ì‹œì‘ ===\n');

            const results = [];
            const ì‹œê°„ë§¤í•‘ = [
                {hour: 0, ji: 'ì', index: 0},
                {hour: 2, ji: 'ì¶•', index: 1},
                {hour: 4, ji: 'ì¸', index: 2},
                {hour: 6, ji: 'ë¬˜', index: 3},
                {hour: 8, ji: 'ì§„', index: 4},
                {hour: 10, ji: 'ì‚¬', index: 5},
                {hour: 12, ji: 'ì˜¤', index: 6},
                {hour: 14, ji: 'ë¯¸', index: 7},
                {hour: 16, ji: 'ì‹ ', index: 8},
                {hour: 18, ji: 'ìœ ', index: 9},
                {hour: 20, ji: 'ìˆ ', index: 10},
                {hour: 22, ji: 'í•´', index: 11}
            ];

            ì²œê°„.forEach((gan, ganIndex) => {
                console.log(`\n--- ${gan}ì¼ ì‹œì£¼ ê²€ì¦ ---`);

                const ganResult = {
                    gan: gan,
                    ganIndex: ganIndex,
                    tests: [],
                    correctCount: 0,
                    totalCount: 12
                };

                ì‹œê°„ë§¤í•‘.forEach(({hour, ji, index}) => {
                    // ì‹œìŠ¤í…œ ê³„ì‚°
                    const systemResult = getHourGapja(gan, hour);
                    const systemHour = systemResult.gan + systemResult.ji;

                    // ì „í†µ ì´ë¡  ê²°ê³¼
                    const expectedHour = ì „í†µì‹œì£¼ìˆœì„œ[gan][index];

                    const isCorrect = systemHour === expectedHour;
                    if (isCorrect) ganResult.correctCount++;

                    console.log(`  ${hour.toString().padStart(2,'0')}ì‹œ (${ji}ì‹œ): ${systemHour} (ì˜ˆìƒ: ${expectedHour}) ${isCorrect ? 'âœ…' : 'âŒ'}`);

                    ganResult.tests.push({
                        hour, ji, index, systemHour, expectedHour, isCorrect
                    });
                });

                ganResult.accuracy = Math.round((ganResult.correctCount / ganResult.totalCount) * 100);
                results.push(ganResult);

                console.log(`${gan}ì¼ ì •í™•ë„: ${ganResult.accuracy}% (${ganResult.correctCount}/${ganResult.totalCount})`);
            });

            // ì „ì²´ ê²°ê³¼
            const totalTests = results.reduce((sum, r) => sum + r.totalCount, 0);
            const totalCorrect = results.reduce((sum, r) => sum + r.correctCount, 0);
            const overallAccuracy = Math.round((totalCorrect / totalTests) * 100);

            console.log(`\nğŸ¯ === ì „ì²´ ê²°ê³¼ ===`);
            console.log(`ì´ í…ŒìŠ¤íŠ¸: ${totalTests}ê°œ`);
            console.log(`ì„±ê³µ: ${totalCorrect}ê°œ`);
            console.log(`ì‹¤íŒ¨: ${totalTests - totalCorrect}ê°œ`);
            console.log(`ì „ì²´ ì •í™•ë„: ${overallAccuracy}%`);

            return { results, overallAccuracy, totalCorrect, totalTests };
        }

        function displayResults() {
            const testData = comprehensiveTest();
            const resultsDiv = document.getElementById('test-results');

            // ìš”ì•½ ì •ë³´
            let html = `<div style="background: ${testData.overallAccuracy === 100 ? '#d4edda' : '#fff3cd'}; border: 2px solid ${testData.overallAccuracy === 100 ? '#28a745' : '#ffc107'}; padding: 20px; margin: 20px 0; border-radius: 8px;">`;
            html += '<h2>ğŸ¯ ì „ì²´ ê²€ì¦ ê²°ê³¼</h2>';
            html += `<h3 style="color: ${testData.overallAccuracy === 100 ? 'green' : 'orange'};">ì „ì²´ ì •í™•ë„: ${testData.overallAccuracy}%</h3>`;
            html += `<p>ì„±ê³µ: ${testData.totalCorrect}/${testData.totalTests}</p>`;
            if (testData.overallAccuracy === 100) {
                html += '<p style="color: green; font-weight: bold;">ğŸ‰ ì™„ë²½! ëª¨ë“  ì‹œì£¼ ê³„ì‚°ì´ ì •í™•í•©ë‹ˆë‹¤!</p>';
            } else {
                html += '<p style="color: orange; font-weight: bold;">âš ï¸ ì¼ë¶€ ì˜¤ë¥˜ ë°œê²¬. ì¶”ê°€ ìˆ˜ì • í•„ìš”.</p>';
            }
            html += '</div>';

            // ì²œê°„ë³„ ê²°ê³¼ ê·¸ë¦¬ë“œ
            html += '<div class="test-grid">';
            testData.results.forEach(result => {
                const isAllCorrect = result.accuracy === 100;
                html += `<div class="gan-box ${isAllCorrect ? 'correct' : 'incorrect'}">`;
                html += `<div class="gan-title">${result.gan}ì¼</div>`;
                html += `<div style="text-align: center; font-weight: bold; margin: 10px 0;">`;
                html += `${result.accuracy}% (${result.correctCount}/12)`;
                html += `</div>`;

                // í‹€ë¦° ì‹œê°„ë§Œ í‘œì‹œ
                if (!isAllCorrect) {
                    result.tests.forEach(test => {
                        if (!test.isCorrect) {
                            html += `<div class="time-test" style="color: red;">`;
                            html += `${test.hour}ì‹œ: ${test.systemHour} â‰  ${test.expectedHour}`;
                            html += `</div>`;
                        }
                    });
                }
                html += '</div>';
            });
            html += '</div>';

            // ìƒì„¸ í…Œì´ë¸” (ì˜¤ë¥˜ê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ)
            if (testData.overallAccuracy < 100) {
                html += '<h3>ğŸš¨ ì˜¤ë¥˜ ìƒì„¸ ë¶„ì„</h3>';
                html += '<table>';
                html += '<tr><th>ì²œê°„</th><th>ì‹œê°„</th><th>ì‹œì§€</th><th>ì‹œìŠ¤í…œ ê²°ê³¼</th><th>ì •ë‹µ</th><th>ìƒíƒœ</th></tr>';

                testData.results.forEach(result => {
                    result.tests.forEach(test => {
                        if (!test.isCorrect) {
                            html += `<tr style="background-color: #f8d7da;">`;
                            html += `<td>${result.gan}</td>`;
                            html += `<td>${test.hour}ì‹œ</td>`;
                            html += `<td>${test.ji}ì‹œ</td>`;
                            html += `<td>${test.systemHour}</td>`;
                            html += `<td>${test.expectedHour}</td>`;
                            html += `<td style="color: red;">âŒ ì˜¤ë¥˜</td>`;
                            html += `</tr>`;
                        }
                    });
                });
                html += '</table>';
            }

            // íŠ¹ë³„ ê²€ì¦: ë¬´ì¼ 12ì‹œ
            html += '<div style="background: #e7f3ff; border: 2px solid #007bff; padding: 15px; margin: 20px 0; border-radius: 8px;">';
            html += '<h3>ğŸ¯ íŠ¹ë³„ ê²€ì¦: ë¬´ì¼ 12ì‹œ (ì›ë³¸ ë²„ê·¸ ì¼€ì´ìŠ¤)</h3>';
            const ë¬´ì¼ê²°ê³¼ = testData.results.find(r => r.gan === 'ë¬´');
            const ë¬´ì¼12ì‹œ = ë¬´ì¼ê²°ê³¼.tests.find(t => t.hour === 12);
            html += `<p><strong>ê²°ê³¼</strong>: ${ë¬´ì¼12ì‹œ.systemHour}</p>`;
            html += `<p><strong>ì •ë‹µ</strong>: ${ë¬´ì¼12ì‹œ.expectedHour}</p>`;
            html += `<p><strong>ìƒíƒœ</strong>: ${ë¬´ì¼12ì‹œ.isCorrect ? '<span style="color: green;">âœ… ìˆ˜ì • ì„±ê³µ!</span>' : '<span style="color: red;">âŒ ì•„ì§ ì˜¤ë¥˜ ìˆìŒ</span>'}</p>`;
            html += '</div>';

            resultsDiv.innerHTML = html;
        }

        window.onload = function() {
            setTimeout(displayResults, 500);
        };
    </script>
</body>
</html>