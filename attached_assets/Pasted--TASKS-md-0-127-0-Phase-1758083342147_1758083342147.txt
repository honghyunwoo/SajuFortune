📋 TASKS.md - 극세분화 체크리스트
# 🔮 한국 전통 사주풀이 시스템 통합 프로젝트
## 📊 전체 진행률: 0/127 (0%)
---
## 🏗️ **Phase 0: 계획 및 안전장치 구축** `0/8 (0%)`
### 📁 프로젝트 관리 설정
- [ ] **0.1** TASKS.md 파일을 루트에 생성
- [ ] **0.2** 각 섹션별 완료율 자동 계산 스크립트 추가  
- [ ] **0.3** Git commit hook 설정 (체크리스트 업데이트시 자동 커밋)
### 📖 문서화 및 가이드라인
- [ ] **0.4** ROOT_GUIDELINES.md 생성 (설정 파일 수정 규칙)
- [ ] **0.5** client/src/lib/LIB_GUIDELINES.md 생성
- [ ] **0.6** server/SERVER_GUIDELINES.md 생성  
- [ ] **0.7** shared/SHARED_GUIDELINES.md 생성
- [ ] **0.8** ADAPTER_CONTRACT.md 생성 (프리미엄→기본 변환 규칙)
---
## 🔄 **Phase 1: 데이터 모델 및 어댑터 구축** `0/15 (0%)`
### 🔍 현재 상태 분석
- [ ] **1.1** shared/schema.ts의 SajuData 인터페이스 상세 분석
- [ ] **1.2** premium-calculator.ts의 PremiumSajuAnalysis 구조 분석
- [ ] **1.3** 두 데이터 구조 간 차이점 매핑 테이블 작성
- [ ] **1.4** 손실되는 데이터 필드 식별 및 보존 방법 결정
### 🔌 어댑터 패턴 구현
- [ ] **1.5** `client/src/lib/saju-adapter.ts` 파일 생성
- [ ] **1.6** `adaptPremiumToBasic()` 함수 구현 - 기본 호환성
- [ ] **1.7** `preservePremiumExtras()` 함수 구현 - 프리미엄 데이터 보존
- [ ] **1.8** 신살 데이터 JSON 직렬화 로직 구현
- [ ] **1.9** 음력 데이터 포함 로직 구현
### 🧪 어댑터 테스트
- [ ] **1.10** `__tests__/saju-adapter.test.ts` 파일 생성
- [ ] **1.11** 1989-10-06 12:56 골든 케이스 테스트 작성
- [ ] **1.12** 윤달 케이스 테스트 작성 (1984-10-23)
- [ ] **1.13** 절기 경계선 케이스 테스트 작성 (입춘 전후)
- [ ] **1.14** 자정/정오 경계 케이스 테스트 작성
- [ ] **1.15** 모든 어댑터 테스트 통과 확인
---
## 🖥️ **Phase 2: 백엔드 시스템 통합** `0/18 (0%)`
### 📦 의존성 및 Import 정리
- [ ] **2.1** server/routes.ts에서 기존 import 제거
- [ ] **2.2** premium-calculator 및 어댑터 import 추가
- [ ] **2.3** 사용하지 않는 saju-calculator import 정리
### 🔧 계산 엔진 교체
- [ ] **2.4** calculateSaju() 호출을 calculatePremiumSaju()로 변경
- [ ] **2.5** 어댑터를 통한 데이터 변환 로직 추가
- [ ] **2.6** 프리미엄 분석 결과를 analysisResult에 포함
- [ ] **2.7** 기존 API 응답 형식 호환성 유지 확인
### 🏷️ 스키마 및 타입 업데이트  
- [ ] **2.8** shared/schema.ts에 serviceType 필드 추가 
- [ ] **2.9** shared/schema.ts에 isPaid 필드 추가 (기본값: false)
- [ ] **2.10** insertFortuneReadingSchema 업데이트
- [ ] **2.11** PDF generator 타입 에러 해결 확인
### 🎯 비즈니스 로직 수정
- [ ] **2.12** 결제 검증 로직 제거 (무료화)
- [ ] **2.13** FREE_MODE 환경 변수 추가 (기본값: true)
- [ ] **2.14** 후원 엔드포인트는 유지하되 필수 아니게 변경
- [ ] **2.15** 세션 관리 로직 검토 및 개선
### 🧹 코드 정리 및 보안
- [ ] **2.16** 프로덕션 console.log 제거
- [ ] **2.17** 민감한 정보 로깅 방지 확인
- [ ] **2.18** Stripe API 버전 호환성 확인 및 수정
---
## 🎨 **Phase 3: 프론트엔드 통합** `0/22 (0%)`
### 🔧 결과 페이지 업데이트
- [ ] **3.1** results.tsx에서 프리미엄 필드 접근 로직 추가
- [ ] **3.2** 신살 분석 결과 표시 컴포넌트 구현
- [ ] **3.3** 음력 날짜 표시 추가 
- [ ] **3.4** 계산 정밀도 배지 추가 ("프리미엄 계산 활성화")
- [ ] **3.5** 무료 서비스 안내 배지 추가
### 🏠 홈페이지 무료화 업데이트
- [ ] **3.6** 서비스 비교표에서 "프리미엄" 표시 제거
- [ ] **3.7** "무료로 모든 기능 이용" 메시지 추가
- [ ] **3.8** 일주일 무료 이벤트 배너 추가
- [ ] **3.9** 과대광고 문구 검토 및 수정
- [ ] **3.10** CTA 버튼 텍스트 변경 ("무료로 시작하기")
### 💳 결제 플로우 수정
- [ ] **3.11** checkout.tsx에서 필수 결제 로직 제거
- [ ] **3.12** 선택적 후원 플로우로 변경
- [ ] **3.13** "감사 인사" 메시지 추가
- [ ] **3.14** 후원 금액 제안 UI 개선
### 📄 PDF 생성기 호환성
- [ ] **3.15** pdf-generator.ts 타입 에러 해결
- [ ] **3.16** 프리미엄 분석 내용 PDF 포함 로직 추가
- [ ] **3.17** 신살 분석을 PDF에 포함
- [ ] **3.18** 음력 정보를 PDF에 포함
- [ ] **3.19** PDF 생성 실패시 에러 처리 개선
### 🎯 UI/UX 개선
- [ ] **3.20** 로딩 상태 개선 (계산 시간 표시)
- [ ] **3.21** 에러 메시지 사용자 친화적으로 개선
- [ ] **3.22** 모바일 터치 영역 최적화 (최소 44px)
---
## ✅ **Phase 4: 정확성 검증 및 테스트** `0/20 (0%)`
### 🎯 핵심 정확성 테스트
- [ ] **4.1** 1989-10-06 12:56 테스트 (기미일 → 무오일 확인)
- [ ] **4.2** 일간 계산 정확성 10개 케이스 검증
- [ ] **4.3** 시간별 시주 계산 24시간 전체 검증
- [ ] **4.4** 월주 계산 절기 기준 정확성 검증
### 📅 절기 및 음력 테스트
- [ ] **4.5** 2024년 24절기 경계선 ±10분 테스트
- [ ] **4.6** 1989년 절기 데이터 정확성 검증
- [ ] **4.7** 윤달 처리 정확성 검증 (1984, 1987, 2020년)
- [ ] **4.8** 음력-양력 변환 정확성 비교 검증
### 🔮 신살 계산 검증
- [ ] **4.9** 30종 신살 계산 로직 개별 검증
- [ ] **4.10** 전통 사주학 서적과의 비교 검증
- [ ] **4.11** 성별에 따른 신살 차이 검증
- [ ] **4.12** 신살 설명 텍스트 정확성 검토
### 🌐 End-to-End 테스트
- [ ] **4.13** 사주 입력부터 PDF 다운로드까지 전체 플로우
- [ ] **4.14** 브라우저별 호환성 테스트 (Chrome, Safari, Firefox)
- [ ] **4.15** 모바일 기기 테스트 (iOS, Android)
- [ ] **4.16** 다양한 화면 크기 반응형 테스트
### 🔄 회귀 테스트
- [ ] **4.17** 기존 기능 정상 동작 확인
- [ ] **4.18** API 응답 형식 호환성 확인
- [ ] **4.19** 데이터 무결성 확인
- [ ] **4.20** 성능 저하 없음 확인
---
## 📊 **Phase 5: 성능 최적화 및 모니터링** `0/16 (0%)`
### ⚡ 성능 측정 및 최적화
- [ ] **5.1** 계산 시간 메트릭 백엔드 응답에 추가
- [ ] **5.2** 평균 응답 시간 100ms 이하 달성
- [ ] **5.3** PDF 생성 시간 최적화 (3초 이하)
- [ ] **5.4** 메모리 사용량 모니터링 구현
### 📈 모니터링 시스템 구축
- [ ] **5.5** API 응답 시간 로깅 추가
- [ ] **5.6** 에러율 모니터링 구현
- [ ] **5.7** 사용자 플로우 추적 구현
- [ ] **5.8** 계산 정확성 모니터링 구현
### 🔐 보안 및 안정성
- [ ] **5.9** rate limiting 구현 (IP당 분당 10회)
- [ ] **5.10** 입력값 검증 강화
- [ ] **5.11** XSS 방지 검증
- [ ] **5.12** CSRF 토큰 구현
### 📱 사용자 경험 개선
- [ ] **5.13** 캐싱 전략 구현 (동일 입력 재계산 방지)
- [ ] **5.14** 오프라인 지원 기본 구현
- [ ] **5.15** 로딩 애니메이션 개선
- [ ] **5.16** 에러 복구 메커니즘 구현
---
## 🚀 **Phase 6: 배포 및 론칭 준비** `0/18 (0%)`
### 📚 문서화 최종 정리
- [ ] **6.1** README.md 업데이트 (무료 서비스 안내)
- [ ] **6.2** API 문서 업데이트
- [ ] **6.3** 사용자 가이드 작성
- [ ] **6.4** 개발자 가이드 업데이트
### 🏭 프로덕션 준비
- [ ] **6.5** 환경 변수 설정 검토
- [ ] **6.6** 프로덕션 빌드 테스트
- [ ] **6.7** 도메인 및 SSL 설정 확인
- [ ] **6.8** CDN 설정 (정적 자원 최적화)
### 📊 분석 및 추적 설정
- [ ] **6.9** Google Analytics 설정
- [ ] **6.10** 사용자 행동 추적 구현
- [ ] **6.11** 전환율 추적 설정 (후원 버튼 클릭률)
- [ ] **6.12** A/B 테스트 인프라 구축
### 🎯 마케팅 및 소프트 론칭
- [ ] **6.13** 소프트 론칭 사용자 10명 초대
- [ ] **6.14** 피드백 수집 시스템 구현
- [ ] **6.15** 소셜 미디어 공유 최적화
- [ ] **6.16** SEO 최적화 (메타 태그, 구조화 데이터)
### 🔧 운영 준비
- [ ] **6.17** 장애 대응 매뉴얼 작성
- [ ] **6.18** 백업 및 복구 시스템 테스트
---
## 🎭 **Phase 7: 품질 보증 및 최종 검증** `0/10 (0%)`
### 👑 골드 스탠다드 테스트
- [ ] **7.1** 1989-10-06 케이스 100% 정확성 달성
- [ ] **7.2** 전통 사주학 전문가 검토 통과
- [ ] **7.3** 사용자 테스트 만족도 90% 이상
- [ ] **7.4** 모든 브라우저에서 정상 동작 확인
### 🚨 크리티컬 체크포인트
- [ ] **7.5** 개인정보 처리 방침 준수 확인
- [ ] **7.6** 서비스 이용약관 검토
- [ ] **7.7** 접근성 가이드라인 준수 (WCAG 2.1 AA)
- [ ] **7.8** 성능 지표 모든 항목 달성
### 🎊 론칭 최종 승인
- [ ] **7.9** 모든 팀원 최종 승인
- [ ] **7.10** 프로덕션 배포 최종 체크리스트 완료
---
## 📈 **성과 지표 (KPI) 추적**
### 📊 일주일 무료 이벤트 목표
- **일 사용자 수**: 100명 이상
- **사주 계산 성공률**: 99% 이상  
- **PDF 다운로드율**: 사용자의 80% 이상
- **후원 참여율**: 사용자의 5% 이상
- **평균 체류 시간**: 3분 이상
- **만족도 점수**: 4.5/5.0 이상
---
## 🎯 **각 페르소나별 중점 체크사항**
### 👨‍💻 김서버 (백엔드)
- Phase 2 모든 태스크 리드
- 어댑터 패턴 정확한 구현
- API 호환성 절대 보장
### 👩‍💻 박프론트 (프론트엔드)  
- Phase 3 모든 태스크 리드
- TypeScript 타입 안전성 100%
- 모바일 UX 완벽 대응
### 🔍 이품질 (QA)
- Phase 4 모든 태스크 리드  
- 1989년 케이스 절대 정확성
- 모든 회귀 테스트 통과
### 🛠️ 최배포 (DevOps)
- Phase 5, 6 협업 리드
- 성능 지표 100% 달성
- 무중단 배포 보장
### 📿 정사주 (사주학 전문가)
- 계산 정확성 최종 검증
- 전통 근거 100% 확보
- 신살 설명 검토 승인
### 📋 한기획 (PM)
- 전체 프로젝트 오케스트레이션
- 사용자 경험 최적화
- 비즈니스 KPI 달성