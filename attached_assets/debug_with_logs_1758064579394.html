<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” ë””ë²„ê¹… ë¡œê·¸ í¬í•¨ ì‹œì£¼ í…ŒìŠ¤íŠ¸</title>
    <script src="saju-core-functions.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .debug-box { background: #f0f8ff; padding: 20px; margin: 15px 0; border-radius: 8px; border: 2px solid #007bff; }
        .console-log { background: #1e1e1e; color: #00ff00; padding: 15px; font-family: 'Courier New', monospace; border-radius: 5px; overflow-x: auto; white-space: pre-wrap; }
        .result { background: #fff3cd; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107; }
        .error { color: red; font-weight: bold; }
        .success { color: green; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸ” ë””ë²„ê¹… ë¡œê·¸ í¬í•¨ ì‹œì£¼ í…ŒìŠ¤íŠ¸</h1>
    <p><strong>ëª©í‘œ</strong>: ì‹¤ì œ getHourGapja í•¨ìˆ˜ì˜ ë””ë²„ê¹… ë¡œê·¸ë¥¼ í†µí•´ ì˜¤ë¥˜ ì›ì¸ ê·œëª…</p>

    <div class="debug-box">
        <h2>ğŸ“‹ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</h2>
        <button onclick="runTest()" style="padding: 10px 20px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <p style="color: #666; font-size: 14px;">ë²„íŠ¼ì„ í´ë¦­í•œ í›„ F12 â†’ Console íƒ­ì—ì„œ ìƒì„¸ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”!</p>
    </div>

    <div id="test-results"></div>

    <div class="debug-box">
        <h2>ğŸ“Š ì˜ˆìƒ vs ì‹¤ì œ ë¹„êµ</h2>
        <div class="result">
            <strong>ì˜ˆìƒ ê²°ê³¼:</strong><br>
            â€¢ ì¼ê°„: ë¬´(æˆŠ) â†’ dayGanIndex = 4<br>
            â€¢ 12ì‹œ â†’ ì˜¤ì‹œ â†’ hourJiIndex = 6<br>
            â€¢ ë¬´ì¼ ìì‹œì²œê°„ = 8 (ì„ìì‹œ)<br>
            â€¢ hourGanIndex = (8 + 6) % 10 = 4<br>
            â€¢ ìµœì¢…: ë¬´ì˜¤(æˆŠåˆ)
        </div>
    </div>

    <script>
        // ì½˜ì†” ì¶œë ¥ì„ í™”ë©´ì—ë„ í‘œì‹œí•˜ê¸° ìœ„í•œ í•¨ìˆ˜
        let consoleOutput = '';
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleOutput += args.join(' ') + '\n';
        };

        function runTest() {
            console.clear();
            consoleOutput = '';

            console.log('ğŸš€ === 1989-10-06 12:56 ì‹œì£¼ ê³„ì‚° ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ì‹œì‘ ===\n');

            try {
                // í…ŒìŠ¤íŠ¸ ë°ì´í„°
                const testDate = new Date(1989, 9, 6); // 1989ë…„ 10ì›” 6ì¼
                const testHour = 12;

                console.log('ğŸ“… í…ŒìŠ¤íŠ¸ ì¡°ê±´:');
                console.log('  ë‚ ì§œ: ' + testDate.getFullYear() + 'ë…„ ' + (testDate.getMonth() + 1) + 'ì›” ' + testDate.getDate() + 'ì¼');
                console.log('  ì‹œê°„: ' + testHour + 'ì‹œ');
                console.log('');

                // ì „ì²´ ì‚¬ì£¼ ê³„ì‚°
                console.log('ğŸ”® ì „ì²´ ì‚¬ì£¼ ê³„ì‚° ì‹œì‘...');
                const sajuResult = calculateë§Œì„¸ë ¥(testDate, testHour);

                console.log('âœ… ì „ì²´ ì‚¬ì£¼ ê³„ì‚° ì™„ë£Œ');
                console.log('ğŸ“Š ìµœì¢… ê²°ê³¼:');
                console.log('  ë…„ì£¼: ' + sajuResult.year.gan + sajuResult.year.ji);
                console.log('  ì›”ì£¼: ' + sajuResult.month.gan + sajuResult.month.ji);
                console.log('  ì¼ì£¼: ' + sajuResult.day.gan + sajuResult.day.ji);
                console.log('  ì‹œì£¼: ' + sajuResult.hour.gan + sajuResult.hour.ji);
                console.log('');

                // ê²°ê³¼ ë¶„ì„
                const isCorrect = sajuResult.hour.gan === 'ë¬´' && sajuResult.hour.ji === 'ì˜¤';
                console.log('ğŸ¯ ê²°ê³¼ ë¶„ì„:');
                console.log('  ì˜ˆìƒ ì‹œì£¼: ë¬´ì˜¤');
                console.log('  ì‹¤ì œ ì‹œì£¼: ' + sajuResult.hour.gan + sajuResult.hour.ji);
                console.log('  ì •í™•ì„±: ' + (isCorrect ? 'âœ… ì •í™•' : 'âŒ ì˜¤ë¥˜'));

                if (!isCorrect) {
                    if (sajuResult.hour.gan !== 'ë¬´') {
                        const actualIndex = ì²œê°„.indexOf(sajuResult.hour.gan);
                        const expectedIndex = ì²œê°„.indexOf('ë¬´');
                        const offset = (actualIndex - expectedIndex + 10) % 10;
                        console.log('');
                        console.log('ğŸ” ì²œê°„ ì˜¤ë¥˜ ë¶„ì„:');
                        console.log('  ì‹¤ì œ ì²œê°„: ' + sajuResult.hour.gan + ' (ì¸ë±ìŠ¤: ' + actualIndex + ')');
                        console.log('  ì˜ˆìƒ ì²œê°„: ë¬´ (ì¸ë±ìŠ¤: ' + expectedIndex + ')');
                        console.log('  ì˜¤í”„ì…‹: +' + offset);
                    }
                }

                console.log('\nğŸš€ === í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');

                // ê²°ê³¼ë¥¼ HTMLì— í‘œì‹œ
                displayResults(sajuResult, isCorrect);

            } catch (error) {
                console.error('âŒ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                document.getElementById('test-results').innerHTML = `
                    <div class="debug-box">
                        <h2>âŒ ì˜¤ë¥˜ ë°œìƒ</h2>
                        <div style="color: red; font-family: monospace; background: #ffe6e6; padding: 10px; border-radius: 5px;">
                            ${error.message}
                        </div>
                    </div>
                `;
            }
        }

        function displayResults(sajuResult, isCorrect) {
            const resultsDiv = document.getElementById('test-results');

            let html = '<div class="debug-box">';
            html += '<h2>ğŸ¯ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>';
            html += '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr style="background: #f2f2f2;"><th style="border: 1px solid #ddd; padding: 10px;">êµ¬ë¶„</th><th style="border: 1px solid #ddd; padding: 10px;">ê³„ì‚° ê²°ê³¼</th><th style="border: 1px solid #ddd; padding: 10px;">ì˜ˆìƒ ê²°ê³¼</th><th style="border: 1px solid #ddd; padding: 10px;">ìƒíƒœ</th></tr>';
            html += `<tr><td style="border: 1px solid #ddd; padding: 10px;">ë…„ì£¼</td><td style="border: 1px solid #ddd; padding: 10px;">${sajuResult.year.gan}${sajuResult.year.ji}</td><td style="border: 1px solid #ddd; padding: 10px;">ê¸°ì‚¬</td><td style="border: 1px solid #ddd; padding: 10px;">ì°¸ê³ </td></tr>`;
            html += `<tr><td style="border: 1px solid #ddd; padding: 10px;">ì›”ì£¼</td><td style="border: 1px solid #ddd; padding: 10px;">${sajuResult.month.gan}${sajuResult.month.ji}</td><td style="border: 1px solid #ddd; padding: 10px;">ê°‘ìˆ </td><td style="border: 1px solid #ddd; padding: 10px;">ì°¸ê³ </td></tr>`;
            html += `<tr><td style="border: 1px solid #ddd; padding: 10px;">ì¼ì£¼</td><td style="border: 1px solid #ddd; padding: 10px;">${sajuResult.day.gan}${sajuResult.day.ji}</td><td style="border: 1px solid #ddd; padding: 10px;">ë¬´ì˜¤</td><td style="border: 1px solid #ddd; padding: 10px;">${sajuResult.day.gan === 'ë¬´' && sajuResult.day.ji === 'ì˜¤' ? '<span class="success">âœ…</span>' : '<span class="error">âŒ</span>'}</td></tr>`;
            html += `<tr><td style="border: 1px solid #ddd; padding: 10px;">ì‹œì£¼</td><td style="border: 1px solid #ddd; padding: 10px; font-weight: bold; background: ${isCorrect ? '#d4edda' : '#f8d7da'};">${sajuResult.hour.gan}${sajuResult.hour.ji}</td><td style="border: 1px solid #ddd; padding: 10px;">ë¬´ì˜¤</td><td style="border: 1px solid #ddd; padding: 10px;">${isCorrect ? '<span class="success">âœ… ì •í™•</span>' : '<span class="error">âŒ ì˜¤ë¥˜</span>'}</td></tr>`;
            html += '</table>';
            html += '</div>';

            html += '<div class="debug-box">';
            html += '<h2>ğŸ“‹ ì½˜ì†” ë¡œê·¸</h2>';
            html += '<div class="console-log">' + consoleOutput + '</div>';
            html += '<p style="color: #666; font-size: 14px;">ğŸ’¡ ìœ„ ë¡œê·¸ì—ì„œ ğŸ” [DEBUG] ë§ˆí¬ê°€ ìˆëŠ” ì¤„ë“¤ì´ getHourGapja í•¨ìˆ˜ ë‚´ë¶€ ë™ì‘ì…ë‹ˆë‹¤.</p>';
            html += '</div>';

            resultsDiv.innerHTML = html;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì•ˆë‚´
        window.onload = function() {
            console.log('ğŸ” ë””ë²„ê¹… í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì™„ë£Œ. "í…ŒìŠ¤íŠ¸ ì‹¤í–‰" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.');
        };
    </script>
</body>
</html>