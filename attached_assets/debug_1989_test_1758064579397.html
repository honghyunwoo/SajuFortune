<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” 1989-10-06 12:56 ì‹œì£¼ ê³„ì‚° ì›ì¸ ê·œëª…</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .debug-box { background: #f0f8ff; padding: 15px; margin: 10px 0; border-radius: 5px; border: 2px solid #007bff; }
        .error { color: red; font-weight: bold; }
        .success { color: green; font-weight: bold; }
        .step { margin: 5px 0; padding: 8px; background: white; border-left: 3px solid #007bff; }
        .highlight { background: yellow; padding: 2px; }
        table { border-collapse: collapse; width: 100%; margin: 10px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>ğŸ” 1989ë…„ 10ì›” 6ì¼ 12:56 ì‹œì£¼ ê³„ì‚° ë””ë²„ê¹…</h1>
    <p><strong>ëª©í‘œ</strong>: ì‹œì£¼ê°€ ë¬´ì˜¤(æˆŠåˆ)ê°€ ì•„ë‹Œ ê²½ì˜¤(åºšåˆ)ë¡œ ë‚˜ì˜¤ëŠ” ì›ì¸ ê·œëª…</p>

    <div id="debug-output"></div>

    <script>
        // ì›ë³¸ ì‚¬ì£¼í’€ì´ ì‹œìŠ¤í…œ ë³µì‚¬
        const ì²œê°„ = ['ê°‘', 'ì„', 'ë³‘', 'ì •', 'ë¬´', 'ê¸°', 'ê²½', 'ì‹ ', 'ì„', 'ê³„'];
        const ì§€ì§€ = ['ì', 'ì¶•', 'ì¸', 'ë¬˜', 'ì§„', 'ì‚¬', 'ì˜¤', 'ë¯¸', 'ì‹ ', 'ìœ ', 'ìˆ ', 'í•´'];

        // ì¼ì£¼ ê³„ì‚° (ì›ë³¸ê³¼ ë™ì¼)
        function getDayGapja(year, month, day) {
            const baseDate = new Date(1900, 0, 31); // 1900ë…„ 1ì›” 31ì¼ = ê°‘ìì¼
            const targetDate = new Date(year, month - 1, day);
            const diffDays = Math.floor((targetDate - baseDate) / (1000 * 60 * 60 * 24));
            return (diffDays % 60 + 60) % 60; // ìŒìˆ˜ ì²˜ë¦¬
        }

        // ì‹œì£¼ ê³„ì‚° (ë””ë²„ê¹… ë²„ì „)
        function getHourGapja_Debug(dayGan, hour) {
            console.log('\nğŸ” === ì‹œì£¼ ê³„ì‚° ë””ë²„ê¹… ì‹œì‘ ===');
            console.log(`ì…ë ¥ - dayGan: "${dayGan}", hour: ${hour}`);

            // 1ë‹¨ê³„: dayGanIndex ê³„ì‚°
            const dayGanIndex = ì²œê°„.indexOf(dayGan);
            console.log(`1ë‹¨ê³„ - dayGanIndex = ì²œê°„.indexOf("${dayGan}") = ${dayGanIndex}`);
            console.log(`       ì²œê°„ ë°°ì—´: [${ì²œê°„.join(', ')}]`);
            console.log(`       ì²œê°„[${dayGanIndex}] = "${ì²œê°„[dayGanIndex]}"`);

            // 2ë‹¨ê³„: hourJiIndex ê³„ì‚°
            let hourJiIndex;
            if (hour == 23 || (hour >= 0 && hour <= 0)) hourJiIndex = 0;
            else if (hour >= 1 && hour <= 2) hourJiIndex = 1;
            else if (hour >= 3 && hour <= 4) hourJiIndex = 2;
            else if (hour >= 5 && hour <= 6) hourJiIndex = 3;
            else if (hour >= 7 && hour <= 8) hourJiIndex = 4;
            else if (hour >= 9 && hour <= 10) hourJiIndex = 5;
            else if (hour >= 11 && hour <= 12) hourJiIndex = 6; // ì˜¤ì‹œ
            else if (hour >= 13 && hour <= 14) hourJiIndex = 7;
            else if (hour >= 15 && hour <= 16) hourJiIndex = 8;
            else if (hour >= 17 && hour <= 18) hourJiIndex = 9;
            else if (hour >= 19 && hour <= 20) hourJiIndex = 10;
            else if (hour >= 21 && hour <= 22) hourJiIndex = 11;
            else hourJiIndex = 6;

            console.log(`2ë‹¨ê³„ - ${hour}ì‹œ â†’ hourJiIndex = ${hourJiIndex} (${ì§€ì§€[hourJiIndex]})`);

            // 3ë‹¨ê³„: ì¼ê°„ë³„ìì‹œì²œê°„ ë§¤í•‘
            const ì¼ê°„ë³„ìì‹œì²œê°„ = {
                0: 0, 4: 0,  // ê°‘(0), ê¸°(4) â†’ ê°‘ìì‹œ(0)
                1: 2, 5: 2,  // ì„(1), ê²½(5) â†’ ë³‘ìì‹œ(2)
                2: 4, 6: 4,  // ë³‘(2), ì‹ (6) â†’ ë¬´ìì‹œ(4)
                3: 6, 7: 6,  // ì •(3), ì„(7) â†’ ê²½ìì‹œ(6)
                8: 8, 9: 8   // ë¬´(8), ê³„(9) â†’ ì„ìì‹œ(8)
            };

            const ìì‹œì²œê°„ = ì¼ê°„ë³„ìì‹œì²œê°„[dayGanIndex];
            console.log(`3ë‹¨ê³„ - ì¼ê°„ë³„ìì‹œì²œê°„[${dayGanIndex}] = ${ìì‹œì²œê°„}`);
            console.log(`       ë§¤í•‘ í…Œì´ë¸”:`, ì¼ê°„ë³„ìì‹œì²œê°„);
            console.log(`       ë¬´(8)ì¼ì˜ ìì‹œì²œê°„ = ${ì¼ê°„ë³„ìì‹œì²œê°„[8]} (ì„(8))`);

            // 4ë‹¨ê³„: ìµœì¢… hourGanIndex ê³„ì‚°
            const hourGanIndex = (ìì‹œì²œê°„ + hourJiIndex) % 10;
            console.log(`4ë‹¨ê³„ - hourGanIndex = (${ìì‹œì²œê°„} + ${hourJiIndex}) % 10 = ${hourGanIndex}`);
            console.log(`       ì²œê°„[${hourGanIndex}] = "${ì²œê°„[hourGanIndex]}"`);

            // 5ë‹¨ê³„: ê²°ê³¼ ë°˜í™˜
            const result = {
                gan: ì²œê°„[hourGanIndex],
                ji: ì§€ì§€[hourJiIndex]
            };
            console.log(`5ë‹¨ê³„ - ìµœì¢… ê²°ê³¼: ${result.gan}${result.ji}`);
            console.log('ğŸ” === ì‹œì£¼ ê³„ì‚° ë””ë²„ê¹… ì™„ë£Œ ===\n');

            return result;
        }

        // ì „ì²´ ì‚¬ì£¼ ê³„ì‚° í…ŒìŠ¤íŠ¸
        function test1989() {
            const year = 1989, month = 10, day = 6, hour = 12;

            console.log('ğŸ¯ === 1989-10-06 12:56 ì „ì²´ ì‚¬ì£¼ ê³„ì‚° ===');

            // ì¼ì£¼ ê³„ì‚°
            const dayGapja = getDayGapja(year, month, day);
            const dayGan = ì²œê°„[dayGapja % 10];
            const dayJi = ì§€ì§€[dayGapja % 12];

            console.log(`ì¼ì£¼ ê³„ì‚°:`);
            console.log(`  dayGapja = ${dayGapja}`);
            console.log(`  dayGan = ì²œê°„[${dayGapja % 10}] = "${dayGan}"`);
            console.log(`  dayJi = ì§€ì§€[${dayGapja % 12}] = "${dayJi}"`);
            console.log(`  ì¼ì£¼: ${dayGan}${dayJi}`);

            // ì‹œì£¼ ê³„ì‚°
            console.log(`\nì‹œì£¼ ê³„ì‚°:`);
            const hourResult = getHourGapja_Debug(dayGan, hour);

            // ê²°ê³¼ ìš”ì•½
            return {
                dayPillar: `${dayGan}${dayJi}`,
                hourPillar: `${hourResult.gan}${hourResult.ji}`,
                dayGan: dayGan,
                hourGan: hourResult.gan,
                dayJi: dayJi,
                hourJi: hourResult.ji
            };
        }

        // HTML ì¶œë ¥ í•¨ìˆ˜
        function displayResults() {
            const output = document.getElementById('debug-output');

            // ì½˜ì†” ë¡œê¹…ë„ ìˆ˜í–‰
            console.clear();
            const result = test1989();

            let html = '<div class="debug-box">';
            html += '<h2>ğŸ¯ ê³„ì‚° ê²°ê³¼</h2>';
            html += '<table>';
            html += '<tr><th>í•­ëª©</th><th>ê³„ì‚° ê²°ê³¼</th><th>ì˜ˆìƒ ê²°ê³¼</th><th>ìƒíƒœ</th></tr>';
            html += `<tr><td>ì¼ì£¼</td><td><strong>${result.dayPillar}</strong></td><td>ë¬´ì˜¤</td><td>${result.dayPillar === 'ë¬´ì˜¤' ? '<span class="success">âœ… ì •í™•</span>' : '<span class="error">âŒ ì˜¤ë¥˜</span>'}</td></tr>`;
            html += `<tr><td>ì‹œì£¼</td><td><strong>${result.hourPillar}</strong></td><td>ë¬´ì˜¤</td><td>${result.hourPillar === 'ë¬´ì˜¤' ? '<span class="success">âœ… ì •í™•</span>' : '<span class="error">âŒ ì˜¤ë¥˜</span>'}</td></tr>`;
            html += '</table>';
            html += '</div>';

            // ìƒì„¸ ë¶„ì„
            html += '<div class="debug-box">';
            html += '<h2>ğŸ“Š ìƒì„¸ ë¶„ì„</h2>';

            if (result.dayGan !== 'ë¬´') {
                html += `<div class="step"><span class="error">âŒ ì¼ê°„ ì˜¤ë¥˜ ë°œê²¬!</span><br>`;
                html += `ê³„ì‚°ëœ ì¼ê°„: ${result.dayGan}, ì˜ˆìƒ ì¼ê°„: ë¬´<br>`;
                html += `â†’ ì¼ì£¼ ê³„ì‚° ìì²´ì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>`;
            } else {
                html += `<div class="step"><span class="success">âœ… ì¼ê°„ ì •í™•</span><br>`;
                html += `ì¼ê°„ 'ë¬´' ê³„ì‚°ì´ ì •í™•í•©ë‹ˆë‹¤.</div>`;
            }

            if (result.hourGan !== 'ë¬´') {
                html += `<div class="step"><span class="error">âŒ ì‹œê°„ ì²œê°„ ì˜¤ë¥˜ ë°œê²¬!</span><br>`;
                html += `ê³„ì‚°ëœ ì‹œê°„ ì²œê°„: ${result.hourGan}, ì˜ˆìƒ ì²œê°„: ë¬´<br>`;
                html += `â†’ ì‹œì£¼ ê³„ì‚° ë¡œì§ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.</div>`;

                // ì²œê°„ ì¸ë±ìŠ¤ ì°¨ì´ ê³„ì‚°
                const actualIndex = ì²œê°„.indexOf(result.hourGan);
                const expectedIndex = ì²œê°„.indexOf('ë¬´');
                const offset = (actualIndex - expectedIndex + 10) % 10;
                html += `<div class="step"><span class="highlight">ğŸ” ì˜¤í”„ì…‹ ë¶„ì„</span><br>`;
                html += `ì‹¤ì œ ì¸ë±ìŠ¤: ${actualIndex} (${result.hourGan})<br>`;
                html += `ì˜ˆìƒ ì¸ë±ìŠ¤: ${expectedIndex} (ë¬´)<br>`;
                html += `ì˜¤í”„ì…‹: +${offset}</div>`;
            } else {
                html += `<div class="step"><span class="success">âœ… ì‹œê°„ ì²œê°„ ì •í™•</span><br>`;
                html += `ì‹œê°„ ì²œê°„ 'ë¬´' ê³„ì‚°ì´ ì •í™•í•©ë‹ˆë‹¤.</div>`;
            }

            html += '</div>';

            // í•´ê²° ë°©í–¥ ì œì‹œ
            html += '<div class="debug-box">';
            html += '<h2>ğŸ”§ ë‹¤ìŒ ë‹¨ê³„</h2>';
            html += '<div class="step">1. ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•˜ì—¬ ì–´ëŠ ë‹¨ê³„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸</div>';
            html += '<div class="step">2. F12 â†’ Console íƒ­ì—ì„œ ìƒì„¸í•œ ê³„ì‚° ê³¼ì • ë¶„ì„</div>';
            html += '<div class="step">3. ì›ì¸ì„ íŠ¹ì •í•œ í›„ í•´ë‹¹ ë¶€ë¶„ë§Œ ìˆ˜ì •</div>';
            html += '</div>';

            output.innerHTML = html;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        window.onload = function() {
            displayResults();
            console.log('ğŸ“‹ ìƒë‹¨ ê²°ê³¼í‘œì™€ í•¨ê»˜ ì´ ì½˜ì†” ë¡œê·¸ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”!');
        };
    </script>
</body>
</html>